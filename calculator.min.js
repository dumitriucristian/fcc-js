!function(){var n=document.getElementsByTagName("button"),e=document.getElementById("expression"),r="",t=["+","-","*","/","="],o=[],u=[],f="";function i(n){for(var e=[],r=[],o=0;o<n.length;o++)-1==t.indexOf(n[o])?r.push(n[o]):(e.push(r),(r=[]).push(n[o]),e.push(r),r=[]);return e}function a(n){for(var e=0;e<n.length;e++){var r=n[e].join("");o.push(r)}}function l(){console.log(o);var n="",e=function(){var n=-1!=o.indexOf("*"),e=-1!=o.indexOf("/"),r=function(n,e){{if(!0===n&&!1===e)return o.indexOf("*");if(!1===n&&!0===e)return o.indexOf("/")}return!1}(n,e);if(0!=r)return r;{if(n===e&&!0===e)return f=o.indexOf("*"),i=o.indexOf("/"),f<i?f:i;if(t=-1!=o.indexOf("+"),u=-1!=o.indexOf("-"),t||u)return function(){var n=-1!=o.indexOf("+"),e=-1!=o.indexOf("-");{if(n)return o.indexOf("+");if(e)return o.indexOf("-")}}();alert("no operation found")}var t,u;var f,i}();!function(n){if(n>1){var e=n-2,r=o[e];if("-"==r)return!0}}(e);console.log(e);var r,t=e-1,f=e+1,i=(r=f,""==o[t]&&""==o[r]&&(console.log("sunt"),!0),function(n,e){if(console.log(typeof n+n),console.log(o[n]),("-"===e||"+"==e)&&""==o[n])return 0;if("+"===e&&""===o[n-1])return u[u.length-1];if("+"===e&&"-"===o[n-1])return parseInt(-o[n]);if("/"===e&&""==o[n]){var r=u[u.length-1];return u[u.length-1]=0,r}if("*"===e&&""==o[n]){var r=u[u.length-1];return u[u.length-1]=0,r}if(("/"===e||"*"===e)&&"-"===o[n-1])return parseInt(-o[n]);return parseInt(o[n])}(t,n=o[e]));console.log("leftIndexis "+t+"leftValue"+i);var a=function(n,e){if("-"===e)return parseInt(-o[n]);if("+"===e&&""==o[n])return console.log("am ajuns"),0;return parseInt(o[n])}(f,n);console.log("rightIndexIs"+f+"rightValue"+a);var g,d,v=(g=o[t],d=o[f],""!=g&&""!=d);switch(n){case"*":s(v,i*a,n);break;case"/":s(v,i/a,n);break;case"+":case"-":s(v,c(i,a),n);break;default:alert("UNPROPER REQUEST")}o[e]=[],o[e-1]=[],o[e+1]=[],function(){for(var n=0,e=0;e<o.length;e++)""!=o[e]&&n++;return n}()>1&&l()}function s(n,e,r){"*"!=r&&"/"!=r||(console.log("este gradul I "+e+" "+r),u.push(e)),"-"!=r&&"+"!=r||u.push(e),console.log("subotals "+u)}function c(n,e){return n+e}(function(){for(var t=0;t<n.length;t++)n[t].addEventListener("click",function(n){if(f=n.target.innerHTML,r+=f,e.value=r,"="===f){a(i(r)),l();for(var t=0,s=0;s<u.length;s++)t+=u[s],e.value=t;r="",o=[]}"C"===f&&(r="",e.value="",o=[],u=[])})})()}();
